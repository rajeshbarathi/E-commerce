pool:
  name: USAZNPPOOL  # Custom agent pool name

trigger:
  branches:
    exclude:
      - '*'

resources:
  repositories:
    - repository: Azure-Master-Templates
      type: git
      name: Azure-Master-Templates/Azure-Master-Templates
      ref: refs/heads/backend-master-template

    - repository: vna-services-manifest
      name: VNA-Services/vna-services-manifest
      ref: refs/heads/develop

steps:
- script: |
    # Update package list and install prerequisites
    sudo apt-get update
    sudo apt-get install -y wget gnupg

    # Download and install Google Chrome
    wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb
    sudo apt install -y ./google-chrome-stable_current_amd64.deb
    
    # Verify Chrome installation
    google-chrome --version
  displayName: 'Install and Verify Google Chrome'

- script: |
    # Optional: Install additional dependencies for Chrome (if required)
    sudo apt-get install -y libnss3 libgconf-2-4

    # Verify Chrome installation
    google-chrome --version
  displayName: 'Verify Google Chrome Installation'

- script: |
    # Run Maven tests
    mvn clean test
  displayName: 'Run Selenium Tests'
